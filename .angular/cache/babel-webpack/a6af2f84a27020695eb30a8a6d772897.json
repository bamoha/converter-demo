{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MatTableDataSource } from '@angular/material/table';\nimport { StorageService } from '../../shared/service/storage.service';\nimport { LocalStorageItems } from 'src/app/shared/interface/enums.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/service/currency-exchange.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/table\";\nimport * as i6 from \"@angular/material/button\";\n\nfunction HistoryComponent_table_5_th_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \"Date\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HistoryComponent_table_5_td_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r11.date);\n  }\n}\n\nfunction HistoryComponent_table_5_th_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \"Event\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HistoryComponent_table_5_td_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const element_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(element_r12.event);\n  }\n}\n\nfunction HistoryComponent_table_5_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 14);\n    i0.ɵɵtext(1, \"Actions\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HistoryComponent_table_5_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 15);\n    i0.ɵɵelementStart(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function HistoryComponent_table_5_td_9_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const element_r13 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return ctx_r14.setCurrencyJob(element_r13.amount, element_r13.fromCurrency, element_r13.toCurrency);\n    });\n    i0.ɵɵtext(2, \" View \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function HistoryComponent_table_5_td_9_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const element_r13 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return ctx_r16.removeCurrencyItem(element_r13);\n    });\n    i0.ɵɵtext(4, \" Delete \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HistoryComponent_table_5_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 18);\n  }\n}\n\nfunction HistoryComponent_table_5_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 19);\n  }\n}\n\nfunction HistoryComponent_table_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 6);\n    i0.ɵɵelementContainerStart(1, 7);\n    i0.ɵɵtemplate(2, HistoryComponent_table_5_th_2_Template, 2, 0, \"th\", 8);\n    i0.ɵɵtemplate(3, HistoryComponent_table_5_td_3_Template, 2, 1, \"td\", 9);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(4, 10);\n    i0.ɵɵtemplate(5, HistoryComponent_table_5_th_5_Template, 2, 0, \"th\", 8);\n    i0.ɵɵtemplate(6, HistoryComponent_table_5_td_6_Template, 2, 1, \"td\", 9);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementContainerStart(7, 11);\n    i0.ɵɵtemplate(8, HistoryComponent_table_5_th_8_Template, 2, 0, \"th\", 8);\n    i0.ɵɵtemplate(9, HistoryComponent_table_5_td_9_Template, 5, 0, \"td\", 9);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(10, HistoryComponent_table_5_tr_10_Template, 1, 0, \"tr\", 12);\n    i0.ɵɵtemplate(11, HistoryComponent_table_5_tr_11_Template, 1, 0, \"tr\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"dataSource\", ctx_r0.periodicHistoryDataSource);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"matHeaderRowDef\", ctx_r0.displayedHistoricalColumns)(\"matHeaderRowDefSticky\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matRowDefColumns\", ctx_r0.displayedHistoricalColumns);\n  }\n}\n\nfunction HistoryComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 20);\n    i0.ɵɵtext(1, \" There is no historical data yet to show \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let HistoryComponent = /*#__PURE__*/(() => {\n  class HistoryComponent {\n    constructor(currencyExchangeService, router) {\n      this.currencyExchangeService = currencyExchangeService;\n      this.router = router;\n      this.displayedHistoricalColumns = ['date', 'event', 'actions'];\n    }\n\n    ngOnInit() {\n      this.periodicHistoryData = this.customHistoryData() || [];\n      this.periodicHistoryDataSource = new MatTableDataSource(this.periodicHistoryData);\n    }\n\n    customHistoryData() {\n      return this.currencyExchangeService.periodicHistoryExchangeRates.map(item => {\n        return {\n          id: item.id,\n          date: item.date,\n          event: `Converted an amount of ${item.amount} from ${item.fromCurrency} to ${item.toCurrency}`,\n          actions: '',\n          amount: item.amount,\n          fromCurrency: item.fromCurrency,\n          toCurrency: item.toCurrency\n        };\n      });\n    }\n\n    setCurrencyJob(amount, fromCurrency, toCurrency) {\n      this.router.navigate(['converter']).then();\n      this.currencyExchangeService.toggleServiceReferral();\n      this.currencyExchangeService.converterForm = new FormGroup({\n        amountControl: new FormControl(amount, [Validators.required]),\n        fromControl: new FormControl(fromCurrency, [Validators.required]),\n        toControl: new FormControl(toCurrency, [Validators.required])\n      });\n    }\n\n    removeCurrencyItem(element) {\n      this.currencyExchangeService.periodicHistoryExchangeRates = this.filterHistoryList(element);\n      this.setFilteredDataToStorage();\n      this.periodicHistoryDataSource = new MatTableDataSource(this.customHistoryData());\n    }\n\n    filterHistoryList(item) {\n      return this.currencyExchangeService.periodicHistoryExchangeRates.filter(matchedItem => matchedItem.id !== item.id);\n    }\n\n    setFilteredDataToStorage() {\n      StorageService.setObject(LocalStorageItems.SavedValues, [...this.currencyExchangeService.periodicHistoryExchangeRates]);\n    }\n\n  }\n\n  HistoryComponent.ɵfac = function HistoryComponent_Factory(t) {\n    return new (t || HistoryComponent)(i0.ɵɵdirectiveInject(i1.CurrencyExchangeService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  HistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HistoryComponent,\n    selectors: [[\"app-history\"]],\n    decls: 8,\n    vars: 2,\n    consts: [[1, \"d-flex\", \"align-items-start\", \"justify-content-center\", \"mt-4\"], [1, \"page-title\", \"title--font-size\", \"font--roboto-bold\"], [1, \"d-flex\", \"flex-fill\"], [1, \"history-area-table\", \"w-100\", \"mb-4\"], [\"mat-table\", \"\", \"class\", \"w-100 mat-elevation-z8\", 3, \"dataSource\", 4, \"ngIf\", \"ngIfElse\"], [\"noHistoricalData\", \"\"], [\"mat-table\", \"\", 1, \"w-100\", \"mat-elevation-z8\", 3, \"dataSource\"], [\"matColumnDef\", \"date\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"event\"], [\"matColumnDef\", \"actions\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\", \"matHeaderRowDefSticky\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-button\", \"\", 1, \"icon-red-eye\", \"primary--color\", 3, \"click\"], [\"mat-button\", \"\", 1, \"icon-delete-forever\", \"warn--color\", \"ml-2\", 3, \"click\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [1, \"no--margin\", \"color--matte-red\"]],\n    template: function HistoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"h3\", 1);\n        i0.ɵɵtext(2, \" Conversion History \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"mat-card\", 2);\n        i0.ɵɵelementStart(4, \"section\", 3);\n        i0.ɵɵtemplate(5, HistoryComponent_table_5_Template, 12, 4, \"table\", 4);\n        i0.ɵɵtemplate(6, HistoryComponent_ng_template_6_Template, 2, 0, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(7);\n\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.periodicHistoryData.length > 0)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i3.MatCard, i4.NgIf, i5.MatTable, i5.MatColumnDef, i5.MatHeaderCellDef, i5.MatCellDef, i5.MatHeaderRowDef, i5.MatRowDef, i5.MatHeaderCell, i5.MatCell, i6.MatButton, i5.MatHeaderRow, i5.MatRow],\n    styles: [\".page-title[_ngcontent-%COMP%]{margin-bottom:45px}.history-area-table[_ngcontent-%COMP%]{overflow-y:auto}.history-area-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]{min-width:230px;max-width:230px}.history-area-table[_ngcontent-%COMP%]   .mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.history-area-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .mat-column-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inherit}\"]\n  });\n  return HistoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}